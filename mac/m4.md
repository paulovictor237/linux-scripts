# Guia Manual — Setup de Desenvolvimento no macOS Sequoia 15.5

> **Como usar**: cada seção abaixo contém **apenas comandos**. Copie e cole no Terminal conforme sua necessidade. Itens opcionais estão marcados como *(opcional)*. Onde houver caminhos diferentes para Apple Silicon (ARM) e Intel, siga o bloco indicado.

---

## 0) Pré‑requisitos do sistema

### 0.1 Verificar arquitetura (Apple Silicon vs Intel)

```bash
uname -m
# arm64 = Apple Silicon | x86_64 = Intel
```

### 0.2 (Apple Silicon) Instalar Rosetta 2 *(se pedir)*

```bash
softwareupdate --install-rosetta --agree-to-license
```

### 0.3 Xcode Command Line Tools

```bash
xcode-select --install
```

### 0.4 Apple Silicon (M4) — Ajustes essenciais

#### 0.4.1 Confirmar arquitetura e PATH do Homebrew

```bash
uname -m
brew --prefix
echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zprofile
source ~/.zprofile
```

#### 0.4.2 Rosetta e shell x86\_64 (opcional)

```bash
softwareupdate --install-rosetta --agree-to-license
echo 'alias x86="arch -x86_64 zsh --login"' >> ~/.zshrc
exec zsh -l
```

#### 0.4.3 Node/NPM em arm64 e builds nativos

```bash
node -p process.arch
npm config set python "$(which python3)"
```

#### 0.4.4 JAVA\_HOME (Temurin 17)

```bash
echo 'export JAVA_HOME=$(/usr/libexec/java_home -v 17)' >> ~/.zprofile
source ~/.zprofile
java -version
```

#### 0.4.5 Android SDK (imagens ARM64 via CLI)

```bash
# Requer cmdline-tools instalado pelo Android Studio
"$ANDROID_HOME"/cmdline-tools/latest/bin/sdkmanager --install \
  "platform-tools" "platforms;android-35" "build-tools;35.0.0" \
  "emulator" "system-images;android-35;google_apis;arm64-v8a"

"$ANDROID_HOME"/cmdline-tools/latest/bin/avdmanager create avd \
  -n Pixel_API_35_ARM64 -k "system-images;android-35;google_apis;arm64-v8a" \
  --device "pixel_7"

"$ANDROID_HOME"/emulator/emulator -list-avds
```

#### 0.4.6 Docker (rodar imagens amd64 quando necessário)

```bash
docker run --rm --platform=linux/amd64 alpine uname -m
# saída esperada: x86_64 (emulado)
docker buildx ls
```

---

## 1) Homebrew (gestor de pacotes)

### 1.1 Instalar Homebrew

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

### 1.2 Colocar o `brew` no PATH

**Apple Silicon (arm64)**

```bash
echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zprofile
source ~/.zprofile
```

**Intel (x86\_64)**

```bash
echo 'eval "$(/usr/local/bin/brew shellenv)"' >> ~/.zprofile
source ~/.zprofile
```

### 1.3 Atualizar Homebrew

```bash
brew update && brew upgrade
```

---

## 2) Git & SSH

### 2.1 Git

```bash
brew install git
```

### 2.2 Configuração do Git

```bash
git config --global user.name "seu_nome"
git config --global user.email "seu_email@example.com"
```

### 2.3 Criar chave SSH (recomendado ed25519)

```bash
ssh-keygen -t ed25519 -C "seu_email@example.com"
eval "$(ssh-agent -s)"
ssh-add --apple-use-keychain ~/.ssh/id_ed25519  # macOS integra com o Keychain
```

*(Alternativa compatível com o script original — RSA 4096)*

```bash
ssh-keygen -t rsa -b 4096 -C "seu_email@example.com"
ssh-add --apple-use-keychain ~/.ssh/id_rsa
```

### 2.4 Copiar a chave pública para colar no GitHub/Bitbucket

```bash
cat ~/.ssh/id_ed25519.pub
# ou
cat ~/.ssh/id_rsa.pub
```

### 2.5 Testar acesso

```bash
ssh -T git@github.com
ssh -T git@bitbucket.org
```

---

## 3) Zsh + Plugins

### 3.1 (oh-my-zsh)

```bash
export RUNZSH=no
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

### 3.2 (opcional) Zinit

```bash
bash -c "$(curl --fail --show-error --silent --location https://raw.githubusercontent.com/zdharma-continuum/zinit/HEAD/scripts/install.sh)"
```

### 3.3 Recarregar shell

```bash
exec zsh -l
```

### 3.4 Zinit — Plugins recomendados

```bash
echo 'zinit light zdharma/fast-syntax-highlighting' >> ~/.zshrc
echo 'zinit light zsh-users/zsh-autosuggestions' >> ~/.zshrc
echo 'zinit light zsh-users/zsh-completions' >> ~/.zshrc
exec zsh -l
```

---

## 4) Node.js (NVM), Yarn e Bun

### 4.1 NVM

```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
source ~/.zshrc
```

### 4.2 Node 20.x (seguir o script original)

```bash
nvm install v20.12.2
nvm alias default v20.12.2
nvm use v20.12.2
```

### 4.3 Pacotes globais

```bash
npm i -g yarn bun @google/gemini-cli
nvm list
```

*(Alternativa Bun via Homebrew)*

```bash
brew install bun
```

---

## 5) Python (pyenv) + Pipenv

### 5.1 Dependências de build

```bash
brew install pyenv openssl readline sqlite3 xz zlib tcl-tk
```

### 5.2 Variáveis recomendadas para builds de Python

```bash
# Ajusta caminhos para libs do Homebrew (Apple Silicon)
echo 'export LDFLAGS="-L/opt/homebrew/opt/zlib/lib -L/opt/homebrew/opt/sqlite/lib -L/opt/homebrew/opt/readline/lib -L/opt/homebrew/opt/openssl@3/lib"' >> ~/.zprofile
echo 'export CPPFLAGS="-I/opt/homebrew/opt/zlib/include -I/opt/homebrew/opt/sqlite/include -I/opt/homebrew/opt/readline/include -I/opt/homebrew/opt/openssl@3/include"' >> ~/.zprofile
source ~/.zprofile
```

*(Para Intel, troque `/opt/homebrew` por `/usr/local` caso necessário.)*

### 5.3 Instalar e escolher Python 3.10.x

```bash
pyenv install 3.10.14
pyenv global 3.10.14
python3 -V
```

### 5.4 Pip e Pipenv

```bash
python3 -m pip install --upgrade pip
pip install pipenv
pyenv versions
```

---

## 6) Docker Desktop

### 6.1 Instalar Docker Desktop

```bash
brew install --cask docker
open -a Docker
```

### 6.2 Testar

```bash
docker run hello-world
```

---

## 7) Aplicativos (Homebrew Casks)

### 7.1 IDEs e utilitários de dev

```bash
brew install --cask visual-studio-code android-studio postman insomnia beekeeper-studio dbeaver-community bitwarden copyq
```

### 7.2 Navegadores

```bash
brew install --cask google-chrome microsoft-edge
```

### 7.3 Produtividade

```bash
brew install --cask obsidian slack spotify stremio
```

### 7.4 OBS Studio e FFmpeg

```bash
brew install --cask obs
brew install ffmpeg
```

---

## 8) Teleport (goteleport)

```bash
brew install teleport
```

---

## 9) React Native — macOS

### 9.1 iOS — Xcode & CocoaPods

```bash
# Instale o Xcode (App Store) e abra uma vez para concluir componentes
# Em seguida:
xcode-select --switch /Applications/Xcode.app/Contents/Developer
sudo xcodebuild -license accept
brew install cocoapods
pod --version
```

### 9.2 Watchman

```bash
brew install watchman
```

### 9.3 Java 17 (Temurin)

```bash
brew install --cask temurin@17
/usr/libexec/java_home -V
```

### 9.4 Android — SDK & variáveis de ambiente

```bash
# 1) Instale o Android Studio (já instalado acima)
# 2) Abra o Android Studio > SDK Manager e instale:
#    - Android SDK Platform (API mais recente)
#    - Android SDK Platform-Tools
#    - Android SDK Build-Tools
#    - Android Emulator
#    - Android System Images (para o simulador)
# 3) Exporte variáveis (ajuste o caminho se necessário):

# Apple Silicon (arm64)
echo 'export ANDROID_HOME="$HOME/Library/Android/sdk"' >> ~/.zprofile
echo 'export PATH="$ANDROID_HOME/emulator:$ANDROID_HOME/platform-tools:$ANDROID_HOME/tools:$PATH"' >> ~/.zprofile

# Intel (x86_64) — normalmente igual ao acima
# Se usar caminho customizado, ajuste ANDROID_HOME para o local correto

source ~/.zprofile

# 4) Aceitar licenças (com SDK CLI instalado)
yes | "$ANDROID_HOME"/cmdline-tools/latest/bin/sdkmanager --licenses || true
```

### 9.5 Criar projeto React Native (exemplo)

```bash
# Node já instalado via NVM
npx react-native@latest init MeuApp
cd MeuApp
```

### 9.6 Executar no iOS Simulator

```bash
npm run ios
# ou
npx react-native run-ios
```

### 9.7 Executar no Android Emulator

```bash
npm run android
# ou
npx react-native run-android
```

---

## 9.8 Expo + iOS (Dispositivo físico via Xcode)

### 9.8.1 Criar app Expo

```bash
npx create-expo-app@latest MeuAppExpo
cd MeuAppExpo
```

### 9.8.2 Rodar com Expo Go (rápido)

```bash
# Instale o app "Expo Go" no iPhone (App Store)
# Ative Developer Mode no iPhone: Ajustes > Privacidade e Segurança > Modo Desenvolvedor (iOS 16+)
# Conecte o iPhone ao mesmo Wi‑Fi do Mac ou use cabo USB
npx expo start
# Se houver problemas de rede, use túnel:
npx expo start --tunnel
```

### 9.8.3 Preparar projeto para Xcode (prebuild + Pods)

```bash
# Gera as pastas nativas (ios/ e android/)
npx expo prebuild -p ios
# Instala as dependências nativas do iOS
cd ios && pod install && cd ..
```

### 9.8.4 Executar no iPhone via Xcode

```bash
# Abre o projeto no Xcode
xed ios
# No Xcode: selecione o alvo iOS (seu iPhone conectado),
# defina Team (Signing & Capabilities) e Bundle Identifier único,
# e pressione ▶ (Run) para instalar e rodar no aparelho.
```

### 9.8.5 Executar via CLI (sem abrir Xcode)

```bash
# Requer código assinado e device confiável; útil no dia a dia
brew install ios-deploy
npx expo run:ios --device
# ou indicando o nome exato do device (como visto no Xcode > Devices)
# npx expo run:ios --device "iPhone de Paulo"
```

### 9.8.6 Dev Client (alternativa com EAS) *(opcional, recomendado para APIs nativas)*

```bash
# Instala o EAS CLI e autentica
npm i -g eas-cli
eas login
# Inicializa o EAS no projeto (cria eas.json)
eas init
# Registra o dispositivo e configura certificados/provisioning
# (exige conta Apple Developer)
eas device:create
# Cria um Development Build para instalar no iPhone
eas build -p ios --profile development
# Inicia o bundler usando o Dev Client recém-instalado
npx expo start --dev-client
```

### 9.8.7 Verificações úteis

```bash
# Lista devices reconhecidos pelo Xcode
xcrun xctrace list devices
# Mostra o SDKs iOS instalados
xcodebuild -showsdks
# Verifica o simulador padrão
xcrun simctl list devices | sed -n '1,12p'
```

## 10) Acesso a Packages Privados do GitHub (PX Design System)

### 10.1 GitHub CLI *(opcional, recomendado)*

```bash
brew install gh
gh auth login
```

### 10.2 Token de leitura de packages (alternativa direta)

```bash
echo 'export GITHUB_TOKEN=SEU_TOKEN_COM_read:packages' >> ~/.zshrc
source ~/.zshrc
```

---

## 11) Verificações rápidas

```bash
# Git
git --version

# Node / NPM / Yarn / Bun
node -v
npm -v
yarn -v
bun -v

# Python / Pipenv
python3 -V
pipenv --version

# Docker
docker --version

# React Native (CLI)
npx react-native --version

# CocoaPods / Watchman
pod --version
watchman --version
```

---

## 12) Itens do script original removidos por serem específicos de Linux

* `apt`, `snap`, `flatpak`, GRUB, GDM/Wayland, GNOME extensions e ajustes de swap/teclado foram omitidos por não se aplicarem ao macOS.

## 13) Nerd Fonts

### 13.1 Instalar via Homebrew (recomendado)

```bash
brew tap homebrew/cask-fonts
brew install --cask font-jetbrains-mono-nerd-font
brew install --cask font-fira-code-nerd-font
brew install --cask font-meslo-lg-nerd-font
```
